<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kesehatan Mental</title>

  <link rel="stylesheet" href="style.css">

  <style>
    /* ==============================
       BASE OVERRIDES: tetap jaga struktur awal
       ============================== */
    * { box-sizing: border-box; margin:0; padding:0; font-family: "Poppins", "Segoe UI", Roboto, sans-serif; }
    /* Warna font default (Blue/Pink Gradient) akan menggunakan Dark Blue/Pink Gradient */
    body { color: #3a5fbf; line-height:1.6; min-height:100vh; position:relative; overflow-x:hidden; transition: color .4s ease, background-color .3s ease; }

    body::before{
      content: "";
      position: fixed;
      inset: 0;
      z-index: -100;
      background: linear-gradient(135deg, #f7f9ff 0%, #f2f7ff 40%, #fff4fb 100%);
      transition: background .4s ease;
    }

    /* Header - sekarang bergradien biru->pink (tetap kotak) */
    header {
      background: linear-gradient(90deg, #7aa3ff 0%, #ffb3d9 100%);
      padding: 1rem 0;
      text-align: center;
      position: relative;
      overflow: visible;
      transition: background .4s ease;
    }
    header h1 { margin-bottom: 8px; font-size: 1.8rem; color: #3a5fbf; } /* Dark Blue for Default */

    nav ul { list-style:none; display:flex; justify-content:center; gap:18px; flex-wrap:wrap; margin-top:6px; }
    nav ul li a { text-decoration:none; font-weight:600; padding:6px 8px; display:inline-block; color: #3a5fbf; } /* Dark Blue for Default */
    nav ul li a:hover { text-decoration:underline; }

    section { padding: 40px 20px; max-width: 900px; margin: 20px auto; background: transparent; }

    /* H2 - Default to Dark Blue/Pink Gradient */
    h2 {
      margin-bottom:10px;
      transition: all .4s ease; /* Tambahkan transisi untuk tema */
      /* Dark Blue/Pink Gradient for Default H2/Accent */
      background: linear-gradient(90deg, #3a5fbf 0%, #c4407b 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
    }

    form { margin-top:20px; background: white; padding:18px; border-radius:12px; box-shadow: 0 6px 18px rgba(30,40,80,0.06); }

    .question { margin-bottom:12px; }
    /* INPUT NUMBER STYLE */
    input[type="number"] {
      padding:8px;
      border-radius:6px;
      border:1px solid #ddd;
      width: 60px; /* Ukuran kecil */
      text-align: center;
      -moz-appearance: textfield; /* Hide arrows in Firefox */
    }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none; /* Hide arrows in Chrome/Safari */
      margin: 0;
    }
    
    button, .btn {
      background: #9ebdff;
      color:white;
      padding:10px 16px;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:600;
      position:relative;
      overflow:visible;
      transition: transform .12s ease, box-shadow .12s ease, background .4s ease, color .4s ease;
    }
    button:hover, .btn:hover { transform: translateY(-3px); box-shadow: 0 6px 18px rgba(32,48,120,0.12); }

    #hasil { margin-top:18px; background:#eaf2ff; padding:14px; border-radius:10px; }

    footer { text-align:center; background:transparent; color:inherit; padding:18px 10px; margin-top:40px; }

    .card {
      background: rgba(255,255,255,0.9);
      border-radius: 12px;
      padding: 12px;
      box-shadow: 0 6px 18px rgba(30,40,80,0.05);
      height: 100%;
    }

    .question-label {
        color: inherit; /* Pastikan label mengikuti warna body */
    }

    /* Tata letak grid untuk pertanyaan */
    .questions-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
      gap:15px; /* Tambah gap */
    }
    /* Style untuk form pertanyaan */
    .question-item {
        display:flex;
        flex-direction:column;
        gap:6px;
    }
    .question-label {
        display:block;
        font-weight:600;
        margin-bottom:4px;
        color: inherit;
    }
    .score-control {
        display:flex;
        gap:8px;
        align-items:center;
    }

    /* RUANG CERITA / STORY BOX STYLES (FROM PREVIOUS MOD) */
    #quotes-section { padding: 0; border-radius:12px; background: none; box-shadow: none; }
    
    .story-card {
      background: rgba(255,255,255,0.9);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 6px 18px rgba(30,40,80,0.05);
      margin-bottom: 25px;
    }
    
    #story-textarea, #topic-select {
      width: 100%; 
      padding: 10px; 
      border-radius: 8px; 
      border: 1px solid #ddd; 
      margin-top: 5px;
      font-family: inherit;
      font-size: 1rem;
      background: white; /* Ensure it works with themes */
    }
    #story-textarea {
        resize: vertical; 
        min-height: 150px;
        margin-bottom: 10px;
    }
    
    /* Response Message Box */
    #response-message {
        margin-top: 20px;
        padding: 15px;
        border-radius: 8px;
        border-left: 5px solid #7aa3ff; /* Accent blue */
        background: #f0f7ff;
        color: inherit;
        display: none; /* Hidden by default */
        font-weight: 500;
        transition: all 0.3s ease;
    }
    /* Styles for list of stories */
    .story-list-item {
        margin-bottom: 15px;
        border: 1px solid #eee;
        padding: 15px;
        border-radius: 8px;
        background: white;
        transition: all 0.2s ease;
    }
    .story-list-item:hover {
        box-shadow: 0 4px 12px rgba(30,40,80,0.08);
    }
    .story-list-item h4 {
        margin-bottom: 5px;
        color: inherit;
    }


    /* Theme chooser: DROPDOWN style */
    .theme-chooser {
        display: flex;
        align-items: center;
        gap: 5px;
        padding: 6px 0; /* Padding agar sejajar dengan link navigasi */
    }
    .theme-chooser select, #quote-select {
      padding:4px 8px; /* Dikecilkan agar pas di nav */
      border-radius:8px; border:1px solid #ddd; background-color:white; cursor:pointer;
      box-shadow: 0 3px 6px rgba(0,0,0,0.05);
      min-width: 130px;
      appearance: auto;
      font-size: 0.9rem;
    }
    
    /* Style untuk label tema di header (agar mengikuti warna link) */
    header nav .theme-chooser label {
        font-size: 0.9rem;
        font-weight: 600;
        color: #3a5fbf; /* Default Dark Blue */
        white-space: nowrap;
    }


    /* ==============================
       Theme Specific Styles (Dark Font Colors)
       ============================== */
    /* Pastel Pink Theme */
    body[data-theme="pink"] { color: #7d445c; } /* Dark Pink for all text */
    header[data-theme="pink"] h1, header[data-theme="pink"] nav ul li a, header[data-theme="pink"] nav .theme-chooser label { color: #7d445c; }
    h2[data-theme="pink"] {
        color: #c4407b; /* Darker Pink for headings/accents */
        background: none;
        -webkit-text-fill-color: initial;
        background-clip: initial;
    }
    #response-message[data-theme="pink"] { border-left-color: #ffb3d9; background: #fff4fb; }
    .story-list-item[data-theme="pink"] { border: 1px solid #ffb3d9; }

    /* Pastel Blue Theme */
    body[data-theme="blue"] { color: #30538a; } /* Dark Blue for all text */
    header[data-theme="blue"] h1, header[data-theme="blue"] nav ul li a, header[data-theme="blue"] nav .theme-chooser label { color: #30538a; }
    h2[data-theme="blue"] {
        color: #1a407a; /* Darker Blue for headings/accents */
        background: none;
        -webkit-text-fill-color: initial;
        background-clip: initial;
    }
    #response-message[data-theme="blue"] { border-left-color: #7aa3ff; background: #f0f7ff; }
    .story-list-item[data-theme="blue"] { border: 1px solid #7aa3ff; }

    /* Pastel Purple Theme */
    body[data-theme="purple"] { color: #53308a; } /* Dark Purple for all text */
    header[data-theme="purple"] h1, header[data-theme="purple"] nav ul li a, header[data-theme="purple"] nav .theme-chooser label { color: #53308a; }
    h2[data-theme="purple"] {
        color: #6035b3; /* Darker Purple for headings/accents */
        background: none;
        -webkit-text-fill-color: initial;
        background-clip: initial;
    }
    #response-message[data-theme="purple"] { border-left-color: #b380ff; background: #f8f0ff; }
    .story-list-item[data-theme="purple"] { border: 1px solid #b380ff; }

    /* Gradient Rainbow Theme */
    body[data-theme="rainbow"] { color: #333; } /* Base color dark */
    header[data-theme="rainbow"] h1, header[data-theme="rainbow"] nav ul li a, header[data-theme="rainbow"] nav .theme-chooser label { color: #333; }
    h2[data-theme="rainbow"] {
        /* Dark Rainbow Gradient for headings/accents */
        background: linear-gradient(90deg, #b3579b, #3a5fbf, #53308a);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        color: initial;
    }
    #response-message[data-theme="rainbow"] { 
        border-left: 5px solid; 
        border-image: linear-gradient(180deg, #b3579b, #3a5fbf) 1;
        background: #f7f7f7;
    }
    .story-list-item[data-theme="rainbow"] { 
        border: 1px solid; 
        border-image: linear-gradient(90deg, #b3579b, #3a5fbf) 1;
    }

    /* Override button styling for themes */
    button[data-theme="pink"], .btn[data-theme="pink"] { background: #ffb3d9; color: #333; }
    button[data-theme="blue"], .btn[data-theme="blue"] { background: #7aa3ff; color: white; }
    button[data-theme="purple"], .btn[data-theme="purple"] { background: #b380ff; color: white; }
    button[data-theme="rainbow"], .btn[data-theme="rainbow"] { background: linear-gradient(90deg,#ffd6f0,#dbe9ff); color: #333; }
    .delete-story-btn { background:#ff9999 !important; color:#333 !important; }

    /* ==============================
       Small responsiveness
       ============================== */
    @media (max-width:720px){
      header h1 { font-size:1.4rem; }
      nav ul { gap:10px; font-size:0.95rem; }
      .cloud.c1, .cloud.c2, .cloud.c3 { display:block; opacity:.6; }
      .questions-grid { grid-template-columns: 1fr; } /* Satu kolom di layar kecil */
    }
    @media (max-width: 550px) {
        nav ul { flex-direction: column; gap: 5px; } /* Susun vertikal jika layar terlalu sempit */
        .theme-chooser { justify-content: center; }
    }

  </style>
</head>
<body>

  <div class="clouds" aria-hidden="true">
    <div class="cloud c1" style="left:-30%; top:8%;"></div>
    <div class="cloud c2" style="left:-40%; top:38%;"></div>
    <div class="cloud c3" style="left:-50%; top:68%;"></div>
  </div>

  <header id="main-header">
    <div class="sparkle s1" aria-hidden="true"></div>
    <div class="sparkle s2" aria-hidden="true"></div>
    <div class="sparkle s3" aria-hidden="true"></div>

    <h1>Kesehatan Mental</h1>

    <nav>
      <ul>
        <li><a href="#pencegahan">Pencegahan</a></li>
        <li><a href="#tanda">Tanda-tanda</a></li>
        <li><a href="#mengatasi">Mengatasi</a></li>
        <li><a href="#angket">Tes Mental</a></li>
        <li><a href="#quotes">Ruang Cerita</a></li>
        <li class="theme-menu-item">
            <div class="theme-chooser">
                <label for="theme-select">Tema:</label>
                <select id="theme-select" aria-label="Pilih tema warna">
                    <option value="default">Default (Blue/Pink)</option>
                    <option value="pink">Pastel Pink</option>
                    <option value="blue">Pastel Blue</option>
                    <option value="purple">Pastel Purple</option>
                    <option value="rainbow">Gradient Rainbow</option>
                </select>
            </div>
        </li>
      </ul>
    </nav>
  </header>

  <section id="pencegahan">
    <h2 id="h2-pencegahan">Cara Pencegahan Gangguan Mental</h2>
    <ul>
      <li>Menjaga keseimbangan antara pekerjaan dan istirahat.</li>
      <li>Berolahraga secara teratur.</li>
      <li>Menjaga pola makan sehat dan tidur cukup.</li>
      <li>Berbicara dengan orang yang dipercaya saat menghadapi stres.</li>
      <li>Hindari konsumsi alkohol dan narkoba.</li>
    </ul>
  </section>

  <section id="tanda">
    <h2 id="h2-tanda">Tanda-tanda Gangguan Mental</h2>
    <ul>
      <li>Merasa sedih atau cemas berkepanjangan.</li>
      <li>Kehilangan minat terhadap aktivitas yang disukai.</li>
      <li>Perubahan nafsu makan atau pola tidur.</li>
      <li>Sulit berkonsentrasi.</li>
      <li>Menarik diri dari lingkungan sosial.</li>
    </ul>
  </section>

  <section id="mengatasi">
    <h2 id="h2-mengatasi">Cara Mengatasi Gangguan Mental</h2>
    <ul>
      <li>Konsultasi dengan psikolog atau psikiater.</li>
      <li>Terapi perilaku kognitif atau konseling.</li>
      <li>Menulis jurnal atau meditasi.</li>
      <li>Meningkatkan dukungan sosial.</li>
      <li>Berpartisipasi dalam kegiatan positif.</li>
    </ul>
  </section>

  <section id="angket">
    <h2 id="h2-angket">Tes Kesehatan Mental</h2>

    <button id="toggle-test-btn" class="btn" style="margin-bottom:20px;">
        Mulai Tes Kesehatan <span class="toggle-icon">â–¼</span>
    </button>

    <div id="test-content-container" class="card" style="display:none;">
      
        <div>
            <h3 style="margin-bottom: 15px; color:inherit;">Pilih Jenis Tes Kesehatan Mental Anda</h3>
            
            <ul style="list-style-type: disc; padding-left: 20px; margin-bottom: 25px; line-height: 1.8;">
                <li style="margin-bottom: 8px;"><b>Tes Stres (15 Pertanyaan):</b> Mengukur tingkat ketegangan, iritasi, dan tekanan yang Anda rasakan sehari-hari.</li>
                <li style="margin-bottom: 8px;"><b>Tes Kecemasan (10 Pertanyaan):</b> Menilai gejala kegelisahan, kekhawatiran berlebihan, dan respons fisik Anda.</li>
                <li style="margin-bottom: 8px;"><b>Tes Kebahagiaan (8 Pertanyaan):</b> Mengevaluasi tingkat kepuasan, optimisme, dan rasa syukur Anda terhadap hidup.</li>
                <li><b>Tes Keseimbangan Hidup (12 Pertanyaan):</b> Menilai keseimbangan waktu antara pekerjaan/aktivitas, istirahat, hobi, dan hubungan sosial.</li>
            </ul>
            <div class="tests-tabs" role="tablist" aria-label="Pilih tes" style="margin-bottom: 14px;">
                <button class="tab active" data-test="stres">Tes Stres (15)</button>
                <button class="tab" data-test="kecemasan">Tes Kecemasan</button>
                <button class="tab" data-test="kebahagiaan">Tes Kebahagiaan</button>
                <button class="tab" data-test="keseimbangan">Tes Keseimbangan Hidup</button>
            </div>
            
            <div id="panels" style="margin-top:14px;">
                <div class="test-panel active" data-testpanel="stres">
                    <form class="test-form" data-questions="15">
                        <div style="display:flex;flex-direction:column;gap:15px;">
                            <div class="questions-grid">
                                </div>
                            <div style="display:flex;gap:10px; margin-top:8px;">
                                <button type="submit" class="btn" id="submitStres">Lihat Hasil <span class="hover-ico">âœ¨</span></button>
                                <button type="button" class="btn btn-reset" style="background:#fff;color:#333;border:1px solid #eee;">Reset <span class="hover-ico">â™¡</span></button>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="test-panel" data-testpanel="kecemasan">
                    <form class="test-form" data-questions="10">
                        <div style="display:flex;flex-direction:column;gap:15px;">
                            <div class="questions-grid"></div>
                            <div style="display:flex;gap:10px; margin-top:8px;">
                                <button type="submit" class="btn">Lihat Hasil <span class="hover-ico">âœ¨</span></button>
                                <button type="button" class="btn btn-reset" style="background:#fff;color:#333;border:1px solid #eee;">Reset <span class="hover-ico">â™¡</span></button>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="test-panel" data-testpanel="kebahagiaan">
                    <form class="test-form" data-questions="8">
                        <div style="display:flex;flex-direction:column;gap:15px;">
                            <div class="questions-grid"></div>
                            <div style="display:flex;gap:10px; margin-top:8px;">
                                <button type="submit" class="btn">Lihat Hasil <span class="hover-ico">âœ¨</span></button>
                                <button type="button" class="btn btn-reset" style="background:#fff;color:#333;border:1px solid #eee;">Reset <span class="hover-ico">â™¡</span></button>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="test-panel" data-testpanel="keseimbangan">
                    <form class="test-form" data-questions="12">
                        <div style="display:flex;flex-direction:column;gap:15px;">
                            <div class="questions-grid"></div>
                            <div style="display:flex;gap:10px; margin-top:8px;">
                                <button type="submit" class="btn">Lihat Hasil <span class="hover-ico">âœ¨</span></button>
                                <button type="button" class="btn btn-reset" style="background:#fff;color:#333;border:1px solid #eee;">Reset <span class="hover-ico">â™¡</span></button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <div id="hasil-area" style="margin-top:16px; display:none;" class="card">
                <h3 id="hasil-title">Hasil Tes</h3>
                <p id="hasil-emoji" style="font-size:2rem; margin:8px 0;">ðŸ™‚</p>
                <p id="hasil-score" style="font-weight:700;"></p>
                <p id="hasil-interpretasi"></p>
                <div style="margin-top:8px; display:flex; gap:8px;">
                    <button class="btn" id="saveLocal">Simpan Hasil <span class="hover-ico">â™¡</span></button>
                    <button class="btn" id="downloadResult" style="background:#fff;color:#333;border:1px solid #eee;">Download <span class="hover-ico">âœ¨</span></button>
                </div>
            </div>
        </div>
    </div>
  </section>

  <section id="quotes" style="max-width:980px;margin:30px auto;">
    <h2 id="h2-quotes">Ruang Cerita</h2>
    <div id="quotes-section">
      
      <div class="story-card" id="story-input-card">
          <h3 style="margin-bottom: 15px; color:inherit;">Tulis Cerita atau Curhatmu</h3>
          <form id="story-form">
              <div style="margin-bottom: 15px;">
                  <label for="topic-select" style="font-weight: 600; display: block; margin-bottom: 5px;">Pilih Topik:</label>
                  <select id="topic-select" aria-label="Pilih Topik Curhat" required>
                      <option value="">-- Pilih Topik --</option>
                      <option value="pribadi">Masalah Pribadi/Diri Sendiri</option>
                      <option value="pekerjaan">Pekerjaan/Pendidikan</option>
                      <option value="keluarga">Keluarga/Rumah</option>
                      <option value="hubungan">Hubungan Sosial/Pasangan</option>
                      <option value="umum">Lain-lain (Umum)</option>
                  </select>
              </div>
              
              <label for="story-textarea" style="font-weight: 600; display: block;">Cerita Anda:</label>
              <textarea id="story-textarea" rows="8" placeholder="Bagikan apa yang kamu rasakan di sini..." aria-label="Tulis cerita atau curhat pribadi" required></textarea>
              
              <button id="submit-story-btn" class="btn" type="submit">Kirim Cerita <span class="hover-ico">ðŸ’Œ</span></button>
          </form>

          <div id="response-message" class="card">
              <h4 style="margin-bottom: 5px; color:inherit;">Respon Untukmu:</h4>
              <p id="response-text"></p>
          </div>
      </div>
      
      <div id="saved-stories-container">
          <h3 style="margin-bottom: 15px; color:inherit;">Daftar Cerita Tersimpan</h3>
          <div id="stories-list">
              <p class="card" style